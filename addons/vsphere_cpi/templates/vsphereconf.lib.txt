
(@ def vsphere_conf(values): -@)
[Global]
secret-name = "cloud-provider-vsphere-credentials"
secret-namespace = "kube-system"
(@ if values.vsphereCPI.insecureFlag: -@)
insecure-flag = "1"
(@ else: -@)
thumbprint = "(@=values.vsphereCPI.tlsThumbprint @)"
(@ end -@)
[VirtualCenter "(@=values.vsphereCPI.server @)"]
datacenters = "(@=values.vsphereCPI.datacenter @)"
(@ if values.vsphereCPI.ipFamily: -@)
ip-family = "(@=values.vsphereCPI.ipFamily @)"
(@ end -@)
(@ if values.vsphereCPI.insecureFlag: -@)
insecure-flag = "1"
(@ else: -@)
thumbprint = "(@=values.vsphereCPI.tlsThumbprint @)"
(@ end -@)
(@ if values.vsphereCPI.vmInternalNetwork or values.vsphereCPI.vmExternalNetwork: -@)
[Nodes]
(@ if values.vsphereCPI.vmInternalNetwork: -@)
internal-vm-network-name = "(@=values.vsphereCPI.vmInternalNetwork @)"
(@ end -@)
(@ if values.vsphereCPI.vmExternalNetwork: -@)
external-vm-network-name = "(@=values.vsphereCPI.vmExternalNetwork @)"
(@ end -@)
(@ end -@)
(@ if values.vsphereCPI.nsxt.podRoutingEnabled : -@)
[Route]
router-path = "(@=values.vsphereCPI.nsxt.routes.routerPath @)"
[NSXT]
host = "(@=values.vsphereCPI.nsxt.host @)"
insecure-flag = "(@=str(values.vsphereCPI.nsxt.insecureFlag).lower() @)"
remote-auth = "(@=str(values.vsphereCPI.nsxt.remoteAuth).lower() @)"
secret-name = "(@=values.vsphereCPI.nsxt.secretName @)"
secret-namespace = "(@=values.vsphereCPI.nsxt.secretNamespace @)"
(@ if values.vsphereCPI.nsxt.clientCertData != '' and values.vsphereCPI.nsxt.clientCertKeyData != '' : -@)
client-auth-cert-file = "(@=values.vsphereCPI.nsxt.clientCertData @)"
client-auth-key-file = "(@=values.vsphereCPI.nsxt.clientCertKeyData @)"
ca-file = "(@=values.vsphereCPI.nsxt.rootCAData @)"
(@ elif values.vsphereCPI.nsxt.vmcAccessToken != '' and values.vsphereCPI.nsxt.vmcAuthHost != '' : -@)
vmc-access-token = "(@=values.vsphereCPI.nsxt.vmcAccessToken @)"
vmc-auth-host = "(@=values.vsphereCPI.nsxt.vmcAuthHost @)"
(@ end -@)
(@ end -@)
(@ end -@)